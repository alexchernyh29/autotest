{"name": "test_get_tariff_links_organization_filtered[by_service_id]", "status": "failed", "statusDetails": {"message": "Failed: Ожидались данные по фильтру by_service_id=430, но список пуст", "trace": "filter_key = 'by_service_id', filter_value = 430\n\n    @allure.feature(\"Фильтрация связей тарифов с организациями\")\n    @pytest.mark.parametrize(\n        \"filter_key, filter_value\",\n        [\n            (\"by_tenant_id\", FILTERS[\"by_tenant_id\"]),\n            (\"by_tariff_id\", FILTERS[\"by_tariff_id\"]),\n            (\"by_name\", FILTERS[\"by_name\"]),\n            (\"by_service_id\", FILTERS[\"by_service_id\"]),\n            (\"by_location_id\", FILTERS[\"by_location_id\"])\n        ],\n        ids=[\n            \"by_tenant_id\",\n            \"by_tariff_id\",\n            \"by_name\",\n            \"by_service_id\",\n            \"by_location_id\"\n        ]\n    )\n    def test_get_tariff_links_organization_filtered(filter_key, filter_value):\n        \"\"\"\n        Параметризованный тест: получение связей тарифов с организациями\n        по каждому фильтру по отдельности.\n        \"\"\"\n        with allure.step(\"Подготовка тестовых данных\"):\n            load_dotenv(ENV_FILE)\n            base_url = os.getenv(\"API_URL\")\n            token = os.getenv(\"TOKEN_ID\")\n    \n            assert base_url, \"API_URL не задан в .env\"\n            assert token, \"TOKEN_ID не задан в .env\"\n    \n        # Формируем фильтр — только один параметр за раз\n        params = {filter_key: filter_value}\n    \n        url = f\"{base_url}/api/v1/tariff_links_organization\"\n        headers = {\n            \"accept\": \"application/json\",\n            \"tockenid\": token\n        }\n    \n        with allure.step(f\"Отправка GET-запроса с фильтром: {filter_key}={filter_value}\"):\n            # Генерация cURL\n            curl_command = (\n                f\"curl -X GET '{url}?{filter_key}={filter_value}' \"\n                f\"-H 'accept: application/json' \"\n                f\"-H 'tockenid: {token}'\"\n            )\n            allure.attach(curl_command, \"CURL команда\", allure.attachment_type.TEXT)\n    \n            allure.attach(\n                json.dumps(params, ensure_ascii=False, indent=2),\n                \"Query Parameters\",\n                allure.attachment_type.JSON\n            )\n    \n            allure.attach(\n                json.dumps(headers, ensure_ascii=False, indent=2),\n                \"Request Headers\",\n                allure.attachment_type.JSON\n            )\n    \n            response = requests.get(url, params=params, headers=headers)\n    \n        with allure.step(\"Проверка ответа\"):\n            allure.attach(f\"Финальный URL: {response.url}\", \"Использованный URL\", allure.attachment_type.TEXT)\n            allure.attach(\n                f\"Status Code: {response.status_code}\\nResponse: {response.text}\",\n                \"Response Details\",\n                allure.attachment_type.TEXT\n            )\n    \n            assert response.status_code == 200, f\"Ожидался 200, получен {response.status_code}\"\n    \n            try:\n                links_list = response.json()\n            except ValueError:\n                pytest.fail(\"Ответ не является валидным JSON\")\n    \n            allure.attach(\n                json.dumps(links_list, ensure_ascii=False, indent=2),\n                \"Response (tariff_links_organization list)\",\n                allure.attachment_type.JSON\n            )\n    \n            assert isinstance(links_list, list), \"Ожидался массив связей\"\n    \n            # Проверяем, что хотя бы одна связь соответствует фильтру\n            with allure.step(\"Проверка структуры и соответствия фильтру\"):\n                if len(links_list) == 0:\n                    allure.attach(\n                        f\"Список пуст. Фильтр: {filter_key}={filter_value}\",\n                        \"Внимание\",\n                        allure.attachment_type.TEXT\n                    )\n>                   pytest.fail(f\"Ожидались данные по фильтру {filter_key}={filter_value}, но список пуст\")\nE                   Failed: Ожидались данные по фильтру by_service_id=430, но список пуст\n\ntests\\tariff\\tariff_links_organization\\test_tariff_links_organization_read.py:120: Failed"}, "description": "\nПараметризованный тест: получение связей тарифов с организациями\nпо каждому фильтру по отдельности.\n", "steps": [{"name": "Подготовка тестовых данных", "status": "passed", "start": 1755466612040, "stop": 1755466612043}, {"name": "Отправка GET-запроса с фильтром: by_service_id=430", "status": "passed", "attachments": [{"name": "CURL команда", "source": "4832c0a3-34db-4e5d-9886-0012f50bfc5e-attachment.txt", "type": "text/plain"}, {"name": "Query Parameters", "source": "09e51c36-3865-452c-96c8-90dc37c3c0c1-attachment.json", "type": "application/json"}, {"name": "Request Headers", "source": "580bb82a-5d96-4734-b067-db0dd0d40847-attachment.json", "type": "application/json"}], "start": 1755466612043, "stop": 1755466612636}, {"name": "Проверка ответа", "status": "failed", "statusDetails": {"message": "Failed: Ожидались данные по фильтру by_service_id=430, но список пуст\n", "trace": "  File \"C:\\Users\\annal_e209e90\\OneDrive\\Рабочий стол\\test\\corpsoft\\tests\\tariff\\tariff_links_organization\\test_tariff_links_organization_read.py\", line 120, in test_get_tariff_links_organization_filtered\n    pytest.fail(f\"Ожидались данные по фильтру {filter_key}={filter_value}, но список пуст\")\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\annal_e209e90\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\_pytest\\outcomes.py\", line 177, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "steps": [{"name": "Проверка структуры и соответствия фильтру", "status": "failed", "statusDetails": {"message": "Failed: Ожидались данные по фильтру by_service_id=430, но список пуст\n", "trace": "  File \"C:\\Users\\annal_e209e90\\OneDrive\\Рабочий стол\\test\\corpsoft\\tests\\tariff\\tariff_links_organization\\test_tariff_links_organization_read.py\", line 120, in test_get_tariff_links_organization_filtered\n    pytest.fail(f\"Ожидались данные по фильтру {filter_key}={filter_value}, но список пуст\")\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\annal_e209e90\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\_pytest\\outcomes.py\", line 177, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "attachments": [{"name": "Внимание", "source": "cd2545f4-bd1b-46f8-85f0-3565499b805f-attachment.txt", "type": "text/plain"}], "start": 1755466612639, "stop": 1755466612640}], "attachments": [{"name": "Использованный URL", "source": "c7f317e7-7344-48b4-bdd2-e028dd18210b-attachment.txt", "type": "text/plain"}, {"name": "Response Details", "source": "2c85d9da-ca00-44cf-b1e0-873d425147c4-attachment.txt", "type": "text/plain"}, {"name": "Response (tariff_links_organization list)", "source": "c76fc2be-d1a1-4c38-935b-db87f2c25eeb-attachment.json", "type": "application/json"}], "start": 1755466612636, "stop": 1755466612640}], "parameters": [{"name": "filter_key", "value": "'by_service_id'"}, {"name": "filter_value", "value": "430"}], "start": 1755466612040, "stop": 1755466612641, "uuid": "44896a9d-c9c9-4e9b-ab47-0989ed74fa02", "historyId": "ba4ac498987d31ba0947da7b3069bc7b", "testCaseId": "53f53a2b89ba5baa479d7188ca09a644", "fullName": "tests.tariff.tariff_links_organization.test_tariff_links_organization_read#test_get_tariff_links_organization_filtered", "labels": [{"name": "feature", "value": "Фильтрация связей тарифов с организациями"}, {"name": "parentSuite", "value": "tests.tariff.tariff_links_organization"}, {"name": "suite", "value": "test_tariff_links_organization_read"}, {"name": "host", "value": "Lapochka"}, {"name": "thread", "value": "12236-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.tariff.tariff_links_organization.test_tariff_links_organization_read"}]}