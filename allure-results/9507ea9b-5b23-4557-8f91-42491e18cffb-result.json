{"name": "test_update_organization", "status": "failed", "statusDetails": {"message": "AssertionError: Ошибка при обновлении организации. Status: 500, Response: {\"type\":\"https:\\/\\/tools.ietf.org\\/html\\/rfc2616#section-10\",\"title\":\"An error occurred\",\"status\":500,\"detail\":\"Typed property App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest::$managerId must not be accessed before initialization\",\"class\":\"Error\",\"trace\":[{\"namespace\":\"\",\"short_class\":\"\",\"class\":\"\",\"type\":\"\",\"function\":\"\",\"file\":\"\\/api-gateway\\/src\\/ApiRepresentation\\/BFF\\/Request\\/UpdateManagerRequest.php\",\"line\":16,\"args\":[]},{\"namespace\":\"App\\\\ApiRepresentation\\\\BFF\\\\Request\",\"short_class\":\"UpdateManagerRequest\",\"class\":\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\",\"type\":\"->\",\"function\":\"getManagerId\",\"file\":\"\\/api-gateway\\/src\\/Security\\/Voter\\/ChangeOrganizationVoter.php\",\"line\":26,\"args\":[]},{\"namespace\":\"App\\\\Security\\\\Voter\",\"short_class\":\"ChangeOrganizationVoter\",\"class\":\"App\\\\Security\\\\Voter\\\\ChangeOrganizationVoter\",\"type\":\"->\",\"function\":\"voteOnAttribute\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Voter\\/Voter.php\",\"line\":48,\"args\":[[\"string\",\"changeOrganization\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\",\"short_class\":\"Voter\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\\\\Voter\",\"type\":\"->\",\"function\":\"vote\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Voter\\/TraceableVoter.php\",\"line\":38,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"array\",[[\"string\",\"changeOrganization\"]]]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\",\"short_class\":\"TraceableVoter\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\\\\TraceableVoter\",\"type\":\"->\",\"function\":\"vote\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AccessDecisionManager.php\",\"line\":72,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"array\",[[\"string\",\"changeOrganization\"]]]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AccessDecisionManager\",\"type\":\"->\",\"function\":\"collectResults\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Strategy\\/AffirmativeStrategy.php\",\"line\":40,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Strategy\",\"short_class\":\"AffirmativeStrategy\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Strategy\\\\AffirmativeStrategy\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AccessDecisionManager.php\",\"line\":62,\"args\":[[\"object\",\"Generator\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AccessDecisionManager\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/TraceableAccessDecisionManager.php\",\"line\":62,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"boolean\",false]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"TraceableAccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\TraceableAccessDecisionManager\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AuthorizationChecker.php\",\"line\":52,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AuthorizationChecker\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AuthorizationChecker\",\"type\":\"->\",\"function\":\"isGranted\",\"file\":\"\\/api-gateway\\/vendor\\/sensio\\/framework-extra-bundle\\/src\\/EventListener\\/IsGrantedListener.php\",\"line\":76,\"args\":[[\"string\",\"changeOrganization\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Sensio\\\\Bundle\\\\FrameworkExtraBundle\\\\EventListener\",\"short_class\":\"IsGrantedListener\",\"class\":\"Sensio\\\\Bundle\\\\FrameworkExtraBundle\\\\EventListener\\\\IsGrantedListener\",\"type\":\"->\",\"function\":\"onKernelControllerArguments\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/Debug\\/WrappedListener.php\",\"line\":111,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Debug\\\\TraceableEventDispatcher\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\",\"short_class\":\"WrappedListener\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\",\"type\":\"->\",\"function\":\"__invoke\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/EventDispatcher.php\",\"line\":230,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Debug\\\\TraceableEventDispatcher\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\",\"short_class\":\"EventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\EventDispatcher\",\"type\":\"->\",\"function\":\"callListeners\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/EventDispatcher.php\",\"line\":59,\"args\":[[\"array\",[[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"],[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"],[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"]]],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\",\"short_class\":\"EventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\EventDispatcher\",\"type\":\"->\",\"function\":\"dispatch\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/Debug\\/TraceableEventDispatcher.php\",\"line\":152,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\",\"short_class\":\"TraceableEventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\TraceableEventDispatcher\",\"type\":\"->\",\"function\":\"dispatch\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/HttpKernel.php\",\"line\":158,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"HttpKernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\HttpKernel\",\"type\":\"->\",\"function\":\"handleRaw\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/HttpKernel.php\",\"line\":75,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"],[\"integer\",1]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"HttpKernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\HttpKernel\",\"type\":\"->\",\"function\":\"handle\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/Kernel.php\",\"line\":202,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"],[\"integer\",1],[\"boolean\",true]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"Kernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\Kernel\",\"type\":\"->\",\"function\":\"handle\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/runtime\\/Runner\\/Symfony\\/HttpKernelRunner.php\",\"line\":35,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Runtime\\\\Runner\\\\Symfony\",\"short_class\":\"HttpKernelRunner\",\"class\":\"Symfony\\\\Component\\\\Runtime\\\\Runner\\\\Symfony\\\\HttpKernelRunner\",\"type\":\"->\",\"function\":\"run\",\"file\":\"\\/api-gateway\\/vendor\\/autoload_runtime.php\",\"line\":29,\"args\":[]},{\"namespace\":\"\",\"short_class\":\"\",\"class\":\"\",\"type\":\"\",\"function\":\"require_once\",\"file\":\"\\/api-gateway\\/public\\/index.php\",\"line\":5,\"args\":[[\"string\",\"\\/api-gateway\\/vendor\\/autoload_runtime.php\"]]}]}\nassert 500 == 200\n +  where 500 = <Response [500]>.status_code", "trace": "@allure.feature(\"Организации\")\n    def test_update_organization():\n        \"\"\"Тест обновления организации\"\"\"\n        with allure.step(\"Подготовка тестовых данных\"):\n            # Загрузка переменных окружения\n            load_dotenv(ENV_FILE)\n    \n            # Получение параметров из .env\n            base_url = os.getenv(\"API_URL\")\n            login = os.getenv(\"API_LOGIN\")\n            password = os.getenv(\"API_PASSWORD\")\n            domain = os.getenv(\"API_DOMAIN\")\n            organization_id = os.getenv(\"ORGANIZATION_ID\") or \"388\"  # Используем переданный ID или 388 по умолчанию\n    \n            # Проверка обязательных переменных\n            assert base_url, \"API_URL не задан в .env\"\n            assert login, \"API_LOGIN не задан в .env\"\n            assert password, \"API_PASSWORD не задан в .env\"\n            assert domain, \"API_DOMAIN не задан в .env\"\n            assert organization_id, \"ORGANIZATION_ID не задан в .env\"\n    \n        with allure.step(\"Получение токена авторизации\"):\n            token_id = get_auth_token(base_url, login, password, 600, domain)\n            assert token_id, \"Не удалось получить tockenID\"\n    \n        with allure.step(\"Подготовка данных для обновления\"):\n            update_data = {\n                \"name\": \"Example Company\",\n                \"number_contract\": \"1234567890\",\n                \"address\": \"123 Main St, City, Country\",\n                \"fact_address\": \"456 Elm St, Town, Country\",\n                \"contact_name\": \"John Doe\",\n                \"contact_data\": \"Manager\",\n                \"contact_phone\": \"+1234567890\",\n                \"contact_mail\": \"john.doe@example.com\",\n                \"description\": \"This is an example description.\"\n            }\n    \n            allure.attach(\n                str(update_data),\n                name=\"Данные для обновления организации\",\n                attachment_type=allure.attachment_type.JSON\n            )\n    \n        with allure.step(\"Отправка запроса на обновление организации\"):\n            url = f\"{base_url}/api/v1/organization/{organization_id}\"\n    \n            allure.attach(\n                f\"curl -X PUT '{url}' \"\n                f\"-H 'accept: application/json' \"\n                f\"-H 'content-type: application/json' \"\n                f\"-H 'tockenid: {token_id}' \"\n                f\"-d '{str(update_data).replace(\"'\", '\"')}'\",\n                name=\"CURL команда\",\n                attachment_type=allure.attachment_type.TEXT\n            )\n    \n            response = requests.put(\n                url,\n                headers={\n                    \"accept\": \"application/json\",\n                    \"content-type\": \"application/json\",\n                    \"tockenid\": token_id\n                },\n                json=update_data\n            )\n    \n            allure.attach(\n                f\"Status Code: {response.status_code}\\nResponse: {response.text}\",\n                name=\"Response Details\",\n                attachment_type=allure.attachment_type.TEXT\n            )\n    \n        with allure.step(\"Проверка ответа\"):\n>           assert response.status_code == 200, (\n                f\"Ошибка при обновлении организации. \"\n                f\"Status: {response.status_code}, Response: {response.text}\"\n            )\nE           AssertionError: Ошибка при обновлении организации. Status: 500, Response: {\"type\":\"https:\\/\\/tools.ietf.org\\/html\\/rfc2616#section-10\",\"title\":\"An error occurred\",\"status\":500,\"detail\":\"Typed property App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest::$managerId must not be accessed before initialization\",\"class\":\"Error\",\"trace\":[{\"namespace\":\"\",\"short_class\":\"\",\"class\":\"\",\"type\":\"\",\"function\":\"\",\"file\":\"\\/api-gateway\\/src\\/ApiRepresentation\\/BFF\\/Request\\/UpdateManagerRequest.php\",\"line\":16,\"args\":[]},{\"namespace\":\"App\\\\ApiRepresentation\\\\BFF\\\\Request\",\"short_class\":\"UpdateManagerRequest\",\"class\":\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\",\"type\":\"->\",\"function\":\"getManagerId\",\"file\":\"\\/api-gateway\\/src\\/Security\\/Voter\\/ChangeOrganizationVoter.php\",\"line\":26,\"args\":[]},{\"namespace\":\"App\\\\Security\\\\Voter\",\"short_class\":\"ChangeOrganizationVoter\",\"class\":\"App\\\\Security\\\\Voter\\\\ChangeOrganizationVoter\",\"type\":\"->\",\"function\":\"voteOnAttribute\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Voter\\/Voter.php\",\"line\":48,\"args\":[[\"string\",\"changeOrganization\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\",\"short_class\":\"Voter\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\\\\Voter\",\"type\":\"->\",\"function\":\"vote\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Voter\\/TraceableVoter.php\",\"line\":38,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"array\",[[\"string\",\"changeOrganization\"]]]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\",\"short_class\":\"TraceableVoter\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\\\\TraceableVoter\",\"type\":\"->\",\"function\":\"vote\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AccessDecisionManager.php\",\"line\":72,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"array\",[[\"string\",\"changeOrganization\"]]]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AccessDecisionManager\",\"type\":\"->\",\"function\":\"collectResults\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Strategy\\/AffirmativeStrategy.php\",\"line\":40,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Strategy\",\"short_class\":\"AffirmativeStrategy\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Strategy\\\\AffirmativeStrategy\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AccessDecisionManager.php\",\"line\":62,\"args\":[[\"object\",\"Generator\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AccessDecisionManager\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/TraceableAccessDecisionManager.php\",\"line\":62,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"boolean\",false]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"TraceableAccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\TraceableAccessDecisionManager\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AuthorizationChecker.php\",\"line\":52,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AuthorizationChecker\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AuthorizationChecker\",\"type\":\"->\",\"function\":\"isGranted\",\"file\":\"\\/api-gateway\\/vendor\\/sensio\\/framework-extra-bundle\\/src\\/EventListener\\/IsGrantedListener.php\",\"line\":76,\"args\":[[\"string\",\"changeOrganization\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Sensio\\\\Bundle\\\\FrameworkExtraBundle\\\\EventListener\",\"short_class\":\"IsGrantedListener\",\"class\":\"Sensio\\\\Bundle\\\\FrameworkExtraBundle\\\\EventListener\\\\IsGrantedListener\",\"type\":\"->\",\"function\":\"onKernelControllerArguments\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/Debug\\/WrappedListener.php\",\"line\":111,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Debug\\\\TraceableEventDispatcher\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\",\"short_class\":\"WrappedListener\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\",\"type\":\"->\",\"function\":\"__invoke\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/EventDispatcher.php\",\"line\":230,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Debug\\\\TraceableEventDispatcher\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\",\"short_class\":\"EventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\EventDispatcher\",\"type\":\"->\",\"function\":\"callListeners\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/EventDispatcher.php\",\"line\":59,\"args\":[[\"array\",[[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"],[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"],[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"]]],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\",\"short_class\":\"EventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\EventDispatcher\",\"type\":\"->\",\"function\":\"dispatch\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/Debug\\/TraceableEventDispatcher.php\",\"line\":152,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\",\"short_class\":\"TraceableEventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\TraceableEventDispatcher\",\"type\":\"->\",\"function\":\"dispatch\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/HttpKernel.php\",\"line\":158,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"HttpKernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\HttpKernel\",\"type\":\"->\",\"function\":\"handleRaw\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/HttpKernel.php\",\"line\":75,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"],[\"integer\",1]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"HttpKernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\HttpKernel\",\"type\":\"->\",\"function\":\"handle\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/Kernel.php\",\"line\":202,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"],[\"integer\",1],[\"boolean\",true]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"Kernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\Kernel\",\"type\":\"->\",\"function\":\"handle\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/runtime\\/Runner\\/Symfony\\/HttpKernelRunner.php\",\"line\":35,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Runtime\\\\Runner\\\\Symfony\",\"short_class\":\"HttpKernelRunner\",\"class\":\"Symfony\\\\Component\\\\Runtime\\\\Runner\\\\Symfony\\\\HttpKernelRunner\",\"type\":\"->\",\"function\":\"run\",\"file\":\"\\/api-gateway\\/vendor\\/autoload_runtime.php\",\"line\":29,\"args\":[]},{\"namespace\":\"\",\"short_class\":\"\",\"class\":\"\",\"type\":\"\",\"function\":\"require_once\",\"file\":\"\\/api-gateway\\/public\\/index.php\",\"line\":5,\"args\":[[\"string\",\"\\/api-gateway\\/vendor\\/autoload_runtime.php\"]]}]}\nE           assert 500 == 200\nE            +  where 500 = <Response [500]>.status_code\n\ntests\\organizations\\test_organization_upload.py:90: AssertionError"}, "description": "Тест обновления организации", "steps": [{"name": "Подготовка тестовых данных", "status": "passed", "start": 1755556014042, "stop": 1755556014046}, {"name": "Получение токена авторизации", "status": "passed", "steps": [{"name": "Получение токена аутентификации", "status": "passed", "attachments": [{"name": "CURL команда", "source": "36aad71c-2118-4278-8ac2-626021133514-attachment.txt", "type": "text/plain"}, {"name": "Response Details", "source": "2342beb4-8ef7-4788-9fae-24ebd229f096-attachment.txt", "type": "text/plain"}, {"name": "Токен", "source": "5e0d6e9c-21b7-413f-a8b0-6ba053a37b73-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "base_url", "value": "'https://dev1api.cloudpanel.ru'"}, {"name": "login", "value": "'AutoTest'"}, {"name": "password", "value": "'AutoTest1234!'"}, {"name": "timeoutlive", "value": "600"}, {"name": "domain", "value": "'cloudpanel.ru'"}], "start": 1755556014046, "stop": 1755556014522}], "start": 1755556014046, "stop": 1755556014522}, {"name": "Подготовка данных для обновления", "status": "passed", "attachments": [{"name": "Данные для обновления организации", "source": "56161564-cd87-448e-a4d8-51b28e42eab0-attachment.json", "type": "application/json"}], "start": 1755556014522, "stop": 1755556014523}, {"name": "Отправка запроса на обновление организации", "status": "passed", "attachments": [{"name": "CURL команда", "source": "1bb7cf7a-7aad-406f-aeb8-69e300c5424a-attachment.txt", "type": "text/plain"}, {"name": "Response Details", "source": "84d9810b-6215-490f-ae0b-56e0997331bf-attachment.txt", "type": "text/plain"}], "start": 1755556014523, "stop": 1755556015520}, {"name": "Проверка ответа", "status": "failed", "statusDetails": {"message": "AssertionError: Ошибка при обновлении организации. Status: 500, Response: {\"type\":\"https:\\/\\/tools.ietf.org\\/html\\/rfc2616#section-10\",\"title\":\"An error occurred\",\"status\":500,\"detail\":\"Typed property App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest::$managerId must not be accessed before initialization\",\"class\":\"Error\",\"trace\":[{\"namespace\":\"\",\"short_class\":\"\",\"class\":\"\",\"type\":\"\",\"function\":\"\",\"file\":\"\\/api-gateway\\/src\\/ApiRepresentation\\/BFF\\/Request\\/UpdateManagerRequest.php\",\"line\":16,\"args\":[]},{\"namespace\":\"App\\\\ApiRepresentation\\\\BFF\\\\Request\",\"short_class\":\"UpdateManagerRequest\",\"class\":\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\",\"type\":\"->\",\"function\":\"getManagerId\",\"file\":\"\\/api-gateway\\/src\\/Security\\/Voter\\/ChangeOrganizationVoter.php\",\"line\":26,\"args\":[]},{\"namespace\":\"App\\\\Security\\\\Voter\",\"short_class\":\"ChangeOrganizationVoter\",\"class\":\"App\\\\Security\\\\Voter\\\\ChangeOrganizationVoter\",\"type\":\"->\",\"function\":\"voteOnAttribute\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Voter\\/Voter.php\",\"line\":48,\"args\":[[\"string\",\"changeOrganization\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\",\"short_class\":\"Voter\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\\\\Voter\",\"type\":\"->\",\"function\":\"vote\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Voter\\/TraceableVoter.php\",\"line\":38,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"array\",[[\"string\",\"changeOrganization\"]]]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\",\"short_class\":\"TraceableVoter\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Voter\\\\TraceableVoter\",\"type\":\"->\",\"function\":\"vote\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AccessDecisionManager.php\",\"line\":72,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"array\",[[\"string\",\"changeOrganization\"]]]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AccessDecisionManager\",\"type\":\"->\",\"function\":\"collectResults\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/Strategy\\/AffirmativeStrategy.php\",\"line\":40,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Strategy\",\"short_class\":\"AffirmativeStrategy\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\Strategy\\\\AffirmativeStrategy\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AccessDecisionManager.php\",\"line\":62,\"args\":[[\"object\",\"Generator\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AccessDecisionManager\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/TraceableAccessDecisionManager.php\",\"line\":62,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"],[\"boolean\",false]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"TraceableAccessDecisionManager\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\TraceableAccessDecisionManager\",\"type\":\"->\",\"function\":\"decide\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/security-core\\/Authorization\\/AuthorizationChecker.php\",\"line\":52,\"args\":[[\"object\",\"Lexik\\\\Bundle\\\\JWTAuthenticationBundle\\\\Security\\\\Authenticator\\\\Token\\\\JWTPostAuthenticationToken\"],[\"array\",[[\"string\",\"changeOrganization\"]]],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\",\"short_class\":\"AuthorizationChecker\",\"class\":\"Symfony\\\\Component\\\\Security\\\\Core\\\\Authorization\\\\AuthorizationChecker\",\"type\":\"->\",\"function\":\"isGranted\",\"file\":\"\\/api-gateway\\/vendor\\/sensio\\/framework-extra-bundle\\/src\\/EventListener\\/IsGrantedListener.php\",\"line\":76,\"args\":[[\"string\",\"changeOrganization\"],[\"object\",\"App\\\\ApiRepresentation\\\\BFF\\\\Request\\\\UpdateManagerRequest\"]]},{\"namespace\":\"Sensio\\\\Bundle\\\\FrameworkExtraBundle\\\\EventListener\",\"short_class\":\"IsGrantedListener\",\"class\":\"Sensio\\\\Bundle\\\\FrameworkExtraBundle\\\\EventListener\\\\IsGrantedListener\",\"type\":\"->\",\"function\":\"onKernelControllerArguments\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/Debug\\/WrappedListener.php\",\"line\":111,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Debug\\\\TraceableEventDispatcher\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\",\"short_class\":\"WrappedListener\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\",\"type\":\"->\",\"function\":\"__invoke\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/EventDispatcher.php\",\"line\":230,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Debug\\\\TraceableEventDispatcher\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\",\"short_class\":\"EventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\EventDispatcher\",\"type\":\"->\",\"function\":\"callListeners\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/EventDispatcher.php\",\"line\":59,\"args\":[[\"array\",[[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"],[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"],[\"object\",\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\WrappedListener\"]]],[\"string\",\"kernel.controller_arguments\"],[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\",\"short_class\":\"EventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\EventDispatcher\",\"type\":\"->\",\"function\":\"dispatch\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/event-dispatcher\\/Debug\\/TraceableEventDispatcher.php\",\"line\":152,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"]]},{\"namespace\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\",\"short_class\":\"TraceableEventDispatcher\",\"class\":\"Symfony\\\\Component\\\\EventDispatcher\\\\Debug\\\\TraceableEventDispatcher\",\"type\":\"->\",\"function\":\"dispatch\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/HttpKernel.php\",\"line\":158,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpKernel\\\\Event\\\\ControllerArgumentsEvent\"],[\"string\",\"kernel.controller_arguments\"]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"HttpKernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\HttpKernel\",\"type\":\"->\",\"function\":\"handleRaw\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/HttpKernel.php\",\"line\":75,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"],[\"integer\",1]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"HttpKernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\HttpKernel\",\"type\":\"->\",\"function\":\"handle\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/http-kernel\\/Kernel.php\",\"line\":202,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"],[\"integer\",1],[\"boolean\",true]]},{\"namespace\":\"Symfony\\\\Component\\\\HttpKernel\",\"short_class\":\"Kernel\",\"class\":\"Symfony\\\\Component\\\\HttpKernel\\\\Kernel\",\"type\":\"->\",\"function\":\"handle\",\"file\":\"\\/api-gateway\\/vendor\\/symfony\\/runtime\\/Runner\\/Symfony\\/HttpKernelRunner.php\",\"line\":35,\"args\":[[\"object\",\"Symfony\\\\Component\\\\HttpFoundation\\\\Request\"]]},{\"namespace\":\"Symfony\\\\Component\\\\Runtime\\\\Runner\\\\Symfony\",\"short_class\":\"HttpKernelRunner\",\"class\":\"Symfony\\\\Component\\\\Runtime\\\\Runner\\\\Symfony\\\\HttpKernelRunner\",\"type\":\"->\",\"function\":\"run\",\"file\":\"\\/api-gateway\\/vendor\\/autoload_runtime.php\",\"line\":29,\"args\":[]},{\"namespace\":\"\",\"short_class\":\"\",\"class\":\"\",\"type\":\"\",\"function\":\"require_once\",\"file\":\"\\/api-gateway\\/public\\/index.php\",\"line\":5,\"args\":[[\"string\",\"\\/api-gateway\\/vendor\\/autoload_runtime.php\"]]}]}\nassert 500 == 200\n +  where 500 = <Response [500]>.status_code\n", "trace": "  File \"D:\\project\\autotest\\tests\\organizations\\test_organization_upload.py\", line 90, in test_update_organization\n    assert response.status_code == 200, (\n    ...<2 lines>...\n    )\n"}, "start": 1755556015521, "stop": 1755556015521}], "start": 1755556014042, "stop": 1755556015522, "uuid": "0692630b-3423-4f17-99bf-d192e134a22f", "historyId": "ee94c1b5374a73ebe8bc8ef43298c8a0", "testCaseId": "ee94c1b5374a73ebe8bc8ef43298c8a0", "fullName": "tests.organizations.test_organization_upload#test_update_organization", "labels": [{"name": "feature", "value": "Организации"}, {"name": "parentSuite", "value": "tests.organizations"}, {"name": "suite", "value": "test_organization_upload"}, {"name": "host", "value": "MSI"}, {"name": "thread", "value": "55080-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.organizations.test_organization_upload"}]}