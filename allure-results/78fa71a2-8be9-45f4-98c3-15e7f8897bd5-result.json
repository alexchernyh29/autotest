{"name": "test_create_tariff", "status": "failed", "statusDetails": {"message": "AssertionError: Ожидался статус 200 или 201, но получен 400\nassert (400 == 200 or 400 == 201)\n +  where 400 = <Response [400]>.status_code\n +  and   400 = <Response [400]>.status_code", "trace": "@allure.feature(\"Создание тарифа\")\n    def test_create_tariff():\n        \"\"\"Создание нового тарифа и сохранение его ID в .env\"\"\"\n        with allure.step(\"Подготовка тестовых данных\"):\n            load_dotenv(ENV_FILE)\n            base_url = os.getenv(\"API_URL\")\n            token = os.getenv(\"TOKEN_ID\")\n    \n            assert base_url, \"API_URL не задан в .env\"\n            assert token, \"TOKEN_ID не задан в .env\"\n    \n        url = f\"{base_url}/api/v1/tariff\"\n        headers = {\n            \"accept\": \"application/json\",\n            \"Content-Type\": \"application/json\",\n            \"tockenid\": token\n        }\n    \n        # Тело запроса\n        payload = {\n            \"name\": \"AutoTest Tariff\",\n            \"description\": \"Created by API test\",\n            \"service_id\": 1,\n            \"status_id\": 1,\n            \"type_level_resource\": 1,\n            \"location_id\": 1,\n            \"time_interval_id\": 1,\n            \"permanent_service\": 0\n        }\n    \n        with allure.step(\"Формирование и отправка POST-запроса\"):\n            curl_command = (\n                f\"curl -X POST '{url}' \"\n                f\"-H 'accept: application/json' \"\n                f\"-H 'Content-Type: application/json' \"\n                f\"-H 'tockenid: {token}' \"\n                f\"-d '{str(payload).replace(' ', '').replace(\"'\", '\"')}'\"\n            )\n            allure.attach(\n                curl_command,\n                name=\"CURL команда\",\n                attachment_type=allure.attachment_type.TEXT\n            )\n    \n            allure.attach(\n                str(payload),\n                name=\"Request Body\",\n                attachment_type=allure.attachment_type.JSON\n            )\n    \n            response = requests.post(url, json=payload, headers=headers)\n    \n            with allure.step(\"Проверка ответа\"):\n                allure.attach(\n                    f\"Status Code: {response.status_code}\\nResponse: {response.text}\",\n                    name=\"Response Details\",\n                    attachment_type=allure.attachment_type.TEXT\n                )\n    \n>               assert response.status_code == 200 or response.status_code == 201, \\\n                    f\"Ожидался статус 200 или 201, но получен {response.status_code}\"\nE               AssertionError: Ожидался статус 200 или 201, но получен 400\nE               assert (400 == 200 or 400 == 201)\nE                +  where 400 = <Response [400]>.status_code\nE                +  and   400 = <Response [400]>.status_code\n\ntests\\tariff\\tariff_crud\\test_tariff_create.py:73: AssertionError"}, "description": "Создание нового тарифа и сохранение его ID в .env", "steps": [{"name": "Подготовка тестовых данных", "status": "passed", "start": 1755440385357, "stop": 1755440385357}, {"name": "Формирование и отправка POST-запроса", "status": "failed", "statusDetails": {"message": "AssertionError: Ожидался статус 200 или 201, но получен 400\nassert (400 == 200 or 400 == 201)\n +  where 400 = <Response [400]>.status_code\n +  and   400 = <Response [400]>.status_code\n", "trace": "  File \"C:\\Users\\annal_e209e90\\OneDrive\\Рабочий стол\\test\\corpsoft\\tests\\tariff\\tariff_crud\\test_tariff_create.py\", line 73, in test_create_tariff\n    assert response.status_code == 200 or response.status_code == 201, \\\n        f\"Ожидался статус 200 или 201, но получен {response.status_code}\"\n"}, "steps": [{"name": "Проверка ответа", "status": "failed", "statusDetails": {"message": "AssertionError: Ожидался статус 200 или 201, но получен 400\nassert (400 == 200 or 400 == 201)\n +  where 400 = <Response [400]>.status_code\n +  and   400 = <Response [400]>.status_code\n", "trace": "  File \"C:\\Users\\annal_e209e90\\OneDrive\\Рабочий стол\\test\\corpsoft\\tests\\tariff\\tariff_crud\\test_tariff_create.py\", line 73, in test_create_tariff\n    assert response.status_code == 200 or response.status_code == 201, \\\n        f\"Ожидался статус 200 или 201, но получен {response.status_code}\"\n"}, "attachments": [{"name": "Response Details", "source": "3c50c778-0c6a-4bcc-b6de-56f6cc947801-attachment.txt", "type": "text/plain"}], "start": 1755440385984, "stop": 1755440385985}], "attachments": [{"name": "CURL команда", "source": "e6b480d1-9ce3-41e6-8dee-fd396233c38e-attachment.txt", "type": "text/plain"}, {"name": "Request Body", "source": "953ca5bd-376d-4022-a97f-01ff5193557b-attachment.json", "type": "application/json"}], "start": 1755440385357, "stop": 1755440385986}], "start": 1755440385357, "stop": 1755440385987, "uuid": "deffb825-9414-467a-91ed-c70f654ed711", "historyId": "420f5948f104dabf198985f9dc5e2461", "testCaseId": "420f5948f104dabf198985f9dc5e2461", "fullName": "tests.tariff.tariff_crud.test_tariff_create#test_create_tariff", "labels": [{"name": "feature", "value": "Создание тарифа"}, {"name": "parentSuite", "value": "tests.tariff.tariff_crud"}, {"name": "suite", "value": "test_tariff_create"}, {"name": "host", "value": "Lapochka"}, {"name": "thread", "value": "18228-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.tariff.tariff_crud.test_tariff_create"}]}