{"uid":"e12a8e567796c23c","name":"test_create_resource_service","fullName":"tests.resource.resource_service.test_resource_service_create#test_create_resource_service","historyId":"01e927b9f9e72398ef0cab349174501e","time":{"start":1755440371423,"stop":1755440372585,"duration":1162},"description":"\nТест создания нового сервиса ресурсов через POST /api/v1/resource_service\nПроверяет:\n1. Успешный статус-код (200 или 201)\n2. Валидность JSON-ответа\n3. Наличие ID и переданных данных в ответе\n4. Корректность типов полей\n","descriptionHtml":"<p>Тест создания нового сервиса ресурсов через POST /api/v1/resource_service<br />\nПроверяет:</p>\n<ol>\n<li>Успешный статус-код (200 или 201)</li>\n<li>Валидность JSON-ответа</li>\n<li>Наличие ID и переданных данных в ответе</li>\n<li>Корректность типов полей</li>\n</ol>\n","status":"failed","statusMessage":"AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nassert not ['name', 'system_name']","statusTrace":"@allure.story(\"Создание нового сервиса ресурсов (resource_service)\")\n    def test_create_resource_service():\n        \"\"\"\n        Тест создания нового сервиса ресурсов через POST /api/v1/resource_service\n        Проверяет:\n        1. Успешный статус-код (200 или 201)\n        2. Валидность JSON-ответа\n        3. Наличие ID и переданных данных в ответе\n        4. Корректность типов полей\n        \"\"\"\n        with allure.step(\"Загрузка переменных окружения\"):\n            load_dotenv(ENV_FILE)\n    \n        with allure.step(\"Чтение параметров из .env\"):\n            base_url = os.getenv(\"API_URL\")\n            login = os.getenv(\"API_LOGIN\")\n            password = os.getenv(\"API_PASSWORD\")\n            domain = os.getenv(\"API_DOMAIN\")\n    \n        with allure.step(\"Проверка обязательных переменных окружения\"):\n            assert base_url, \"API_URL не задан в .env\"\n            assert login, \"API_LOGIN не задан в .env\"\n            assert password, \"API_PASSWORD не задан в .env\"\n            assert domain, \"API_DOMAIN не задан в .env\"\n    \n        with allure.step(\"Получение токена аутентификации\"):\n            token = get_auth_token(login, password, 600, domain)\n            assert token, \"Не удалось получить токен аутентификации\"\n    \n        # Генерация уникальных данных\n        import time\n        unique_name = f\"Тестовый сервис {int(time.time())}\"\n        unique_system_name = f\"test_service_{int(time.time())}\"\n    \n        with allure.step(\"Формирование тела запроса\"):\n            request_body = {\n                \"name\": unique_name,\n                \"system_name\": unique_system_name\n            }\n            allure.attach(str(request_body), name=\"Request Body (JSON)\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Формирование URL и заголовков\"):\n            url = f\"{base_url}/api/v1/resource_service\"\n            headers = {\n                \"accept\": \"application/json\",\n                \"Content-Type\": \"application/json\",\n                \"tockenid\": token\n            }\n            allure.attach(url, name=\"Request URL\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(headers), name=\"Request Headers\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Отправка POST-запроса на создание сервиса ресурсов\"):\n            response = requests.post(url, json=request_body, headers=headers)\n            allure.attach(str(response.status_code), name=\"Response Status Code\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(response.text), name=\"Response Body\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(response.headers), name=\"Response Headers\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Проверка статуса ответа\"):\n            # Обычно 200 или 201 при успешном создании\n            assert response.status_code in [200, 201], (\n                f\"Ошибка при создании сервиса ресурсов. \"\n                f\"Статус: {response.status_code}, Ответ: {response.text}\"\n            )\n    \n        with allure.step(\"Парсинг JSON-ответа\"):\n            try:\n                data = response.json()\n            except ValueError:\n                pytest.fail(\"Ответ не является валидным JSON\")\n    \n            allure.attach(str(data), name=\"Parsed Response Data\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Проверка структуры ответа\"):\n            required_fields = [\"id\", \"name\", \"system_name\"]\n            missing = [field for field in required_fields if field not in data]\n>           assert not missing, f\"В ответе отсутствуют обязательные поля: {', '.join(missing)}\"\nE           AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nE           assert not ['name', 'system_name']\n\ntests\\resource\\resource_service\\test_resource_service_create.py:122: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1755440328546,"stop":1755440328547,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"description":"\nТест создания нового сервиса ресурсов через POST /api/v1/resource_service\nПроверяет:\n1. Успешный статус-код (200 или 201)\n2. Валидность JSON-ответа\n3. Наличие ID и переданных данных в ответе\n4. Корректность типов полей\n","status":"failed","statusMessage":"AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nassert not ['name', 'system_name']","statusTrace":"@allure.story(\"Создание нового сервиса ресурсов (resource_service)\")\n    def test_create_resource_service():\n        \"\"\"\n        Тест создания нового сервиса ресурсов через POST /api/v1/resource_service\n        Проверяет:\n        1. Успешный статус-код (200 или 201)\n        2. Валидность JSON-ответа\n        3. Наличие ID и переданных данных в ответе\n        4. Корректность типов полей\n        \"\"\"\n        with allure.step(\"Загрузка переменных окружения\"):\n            load_dotenv(ENV_FILE)\n    \n        with allure.step(\"Чтение параметров из .env\"):\n            base_url = os.getenv(\"API_URL\")\n            login = os.getenv(\"API_LOGIN\")\n            password = os.getenv(\"API_PASSWORD\")\n            domain = os.getenv(\"API_DOMAIN\")\n    \n        with allure.step(\"Проверка обязательных переменных окружения\"):\n            assert base_url, \"API_URL не задан в .env\"\n            assert login, \"API_LOGIN не задан в .env\"\n            assert password, \"API_PASSWORD не задан в .env\"\n            assert domain, \"API_DOMAIN не задан в .env\"\n    \n        with allure.step(\"Получение токена аутентификации\"):\n            token = get_auth_token(login, password, 600, domain)\n            assert token, \"Не удалось получить токен аутентификации\"\n    \n        # Генерация уникальных данных\n        import time\n        unique_name = f\"Тестовый сервис {int(time.time())}\"\n        unique_system_name = f\"test_service_{int(time.time())}\"\n    \n        with allure.step(\"Формирование тела запроса\"):\n            request_body = {\n                \"name\": unique_name,\n                \"system_name\": unique_system_name\n            }\n            allure.attach(str(request_body), name=\"Request Body (JSON)\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Формирование URL и заголовков\"):\n            url = f\"{base_url}/api/v1/resource_service\"\n            headers = {\n                \"accept\": \"application/json\",\n                \"Content-Type\": \"application/json\",\n                \"tockenid\": token\n            }\n            allure.attach(url, name=\"Request URL\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(headers), name=\"Request Headers\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Отправка POST-запроса на создание сервиса ресурсов\"):\n            response = requests.post(url, json=request_body, headers=headers)\n            allure.attach(str(response.status_code), name=\"Response Status Code\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(response.text), name=\"Response Body\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(response.headers), name=\"Response Headers\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Проверка статуса ответа\"):\n            # Обычно 200 или 201 при успешном создании\n            assert response.status_code in [200, 201], (\n                f\"Ошибка при создании сервиса ресурсов. \"\n                f\"Статус: {response.status_code}, Ответ: {response.text}\"\n            )\n    \n        with allure.step(\"Парсинг JSON-ответа\"):\n            try:\n                data = response.json()\n            except ValueError:\n                pytest.fail(\"Ответ не является валидным JSON\")\n    \n            allure.attach(str(data), name=\"Parsed Response Data\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Проверка структуры ответа\"):\n            required_fields = [\"id\", \"name\", \"system_name\"]\n            missing = [field for field in required_fields if field not in data]\n>           assert not missing, f\"В ответе отсутствуют обязательные поля: {', '.join(missing)}\"\nE           AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nE           assert not ['name', 'system_name']\n\ntests\\resource\\resource_service\\test_resource_service_create.py:122: AssertionError","steps":[{"name":"Загрузка переменных окружения","time":{"start":1755440371423,"stop":1755440371425,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Чтение параметров из .env","time":{"start":1755440371425,"stop":1755440371425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Проверка обязательных переменных окружения","time":{"start":1755440371425,"stop":1755440371425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Получение токена аутентификации","time":{"start":1755440371425,"stop":1755440371947,"duration":522},"status":"passed","steps":[{"name":"Отправка запроса для получения токена","time":{"start":1755440371425,"stop":1755440371946,"duration":521},"status":"passed","steps":[],"attachments":[{"uid":"8312a78f37da0373","name":"Request URL","source":"8312a78f37da0373.txt","type":"text/plain","size":48},{"uid":"fe247ea643cd4a6d","name":"Request Headers","source":"fe247ea643cd4a6d.txt","type":"text/plain","size":30},{"uid":"3c87a49fcec9429","name":"Request Params","source":"3c87a49fcec9429.txt","type":"text/plain","size":95},{"uid":"1ba12ede54a6f16c","name":"Response Status Code","source":"1ba12ede54a6f16c.txt","type":"text/plain","size":3},{"uid":"f8e5e079c6a02144","name":"Response Headers","source":"f8e5e079c6a02144.txt","type":"text/plain","size":377},{"uid":"d84d9cf24fbac205","name":"Response Body","source":"d84d9cf24fbac205.txt","type":"text/plain","size":462}],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"attachmentsCount":6,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":1,"hasContent":true,"attachmentsCount":6,"shouldDisplayMessage":false},{"name":"Формирование тела запроса","time":{"start":1755440371947,"stop":1755440371948,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"6d65e98d3f2f9c79","name":"Request Body (JSON)","source":"6d65e98d3f2f9c79.json","type":"application/json","size":94}],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"attachmentsCount":1,"shouldDisplayMessage":false},{"name":"Формирование URL и заголовков","time":{"start":1755440371948,"stop":1755440371949,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"f2b5b68d281cc155","name":"Request URL","source":"f2b5b68d281cc155.txt","type":"text/plain","size":53},{"uid":"d7895d5b1eb8a6e3","name":"Request Headers","source":"d7895d5b1eb8a6e3.json","type":"application/json","size":529}],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"attachmentsCount":2,"shouldDisplayMessage":false},{"name":"Отправка POST-запроса на создание сервиса ресурсов","time":{"start":1755440371949,"stop":1755440372583,"duration":634},"status":"passed","steps":[],"attachments":[{"uid":"3cf10470df0987ec","name":"Response Status Code","source":"3cf10470df0987ec.txt","type":"text/plain","size":3},{"uid":"3b69712d9ee7e1eb","name":"Response Body","source":"3b69712d9ee7e1eb.txt","type":"text/plain","size":10},{"uid":"d64416a586fc01b4","name":"Response Headers","source":"d64416a586fc01b4.json","type":"application/json","size":376}],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"attachmentsCount":3,"shouldDisplayMessage":false},{"name":"Проверка статуса ответа","time":{"start":1755440372584,"stop":1755440372584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Парсинг JSON-ответа","time":{"start":1755440372584,"stop":1755440372584,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"224ba65ee439ccb","name":"Parsed Response Data","source":"224ba65ee439ccb.json","type":"application/json","size":11}],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"attachmentsCount":1,"shouldDisplayMessage":false},{"name":"Проверка структуры ответа","time":{"start":1755440372584,"stop":1755440372584,"duration":0},"status":"failed","statusMessage":"AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nassert not ['name', 'system_name']\n","statusTrace":"  File \"C:\\Users\\annal_e209e90\\OneDrive\\Рабочий стол\\test\\corpsoft\\tests\\resource\\resource_service\\test_resource_service_create.py\", line 122, in test_create_resource_service\n    assert not missing, f\"В ответе отсутствуют обязательные поля: {', '.join(missing)}\"\n","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"attachmentsCount":0,"shouldDisplayMessage":true}],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":11,"hasContent":true,"attachmentsCount":13,"shouldDisplayMessage":true},"afterStages":[],"labels":[{"name":"story","value":"Создание нового сервиса ресурсов (resource_service)"},{"name":"parentSuite","value":"tests.resource.resource_service"},{"name":"suite","value":"test_resource_service_create"},{"name":"host","value":"Lapochka"},{"name":"thread","value":"18228-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.resource.resource_service.test_resource_service_create"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"e12a8e567796c23c.json","parameterValues":[]}