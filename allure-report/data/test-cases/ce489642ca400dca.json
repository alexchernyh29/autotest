{"uid":"ce489642ca400dca","name":"test_create_resource_service","fullName":"tests.resource.resource_service.test_resource_service_create#test_create_resource_service","historyId":"01e927b9f9e72398ef0cab349174501e","time":{"start":1755442610367,"stop":1755442611491,"duration":1124},"description":"\nТест создания нового сервиса ресурсов через POST /api/v1/resource_service\nПроверяет:\n1. Успешный статус-код (200 или 201)\n2. Валидность JSON-ответа\n3. Наличие ID и переданных данных в ответе\n4. Корректность типов полей\n","descriptionHtml":"<p>Тест создания нового сервиса ресурсов через POST /api/v1/resource_service<br />\nПроверяет:</p>\n<ol>\n<li>Успешный статус-код (200 или 201)</li>\n<li>Валидность JSON-ответа</li>\n<li>Наличие ID и переданных данных в ответе</li>\n<li>Корректность типов полей</li>\n</ol>\n","status":"failed","statusMessage":"AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nassert not ['name', 'system_name']","statusTrace":"@allure.story(\"Создание нового сервиса ресурсов (resource_service)\")\n    def test_create_resource_service():\n        \"\"\"\n        Тест создания нового сервиса ресурсов через POST /api/v1/resource_service\n        Проверяет:\n        1. Успешный статус-код (200 или 201)\n        2. Валидность JSON-ответа\n        3. Наличие ID и переданных данных в ответе\n        4. Корректность типов полей\n        \"\"\"\n        with allure.step(\"Загрузка переменных окружения\"):\n            load_dotenv(ENV_FILE)\n    \n        with allure.step(\"Чтение параметров из .env\"):\n            base_url = os.getenv(\"API_URL\")\n            login = os.getenv(\"API_LOGIN\")\n            password = os.getenv(\"API_PASSWORD\")\n            domain = os.getenv(\"API_DOMAIN\")\n    \n        with allure.step(\"Проверка обязательных переменных окружения\"):\n            assert base_url, \"API_URL не задан в .env\"\n            assert login, \"API_LOGIN не задан в .env\"\n            assert password, \"API_PASSWORD не задан в .env\"\n            assert domain, \"API_DOMAIN не задан в .env\"\n    \n        with allure.step(\"Получение токена аутентификации\"):\n            token = get_auth_token(login, password, 600, domain)\n            assert token, \"Не удалось получить токен аутентификации\"\n    \n        # Генерация уникальных данных\n        import time\n        unique_name = f\"Тестовый сервис {int(time.time())}\"\n        unique_system_name = f\"test_service_{int(time.time())}\"\n    \n        with allure.step(\"Формирование тела запроса\"):\n            request_body = {\n                \"name\": unique_name,\n                \"system_name\": unique_system_name\n            }\n            allure.attach(str(request_body), name=\"Request Body (JSON)\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Формирование URL и заголовков\"):\n            url = f\"{base_url}/api/v1/resource_service\"\n            headers = {\n                \"accept\": \"application/json\",\n                \"Content-Type\": \"application/json\",\n                \"tockenid\": token\n            }\n            allure.attach(url, name=\"Request URL\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(headers), name=\"Request Headers\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Отправка POST-запроса на создание сервиса ресурсов\"):\n            response = requests.post(url, json=request_body, headers=headers)\n            allure.attach(str(response.status_code), name=\"Response Status Code\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(response.text), name=\"Response Body\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(response.headers), name=\"Response Headers\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Проверка статуса ответа\"):\n            # Обычно 200 или 201 при успешном создании\n            assert response.status_code in [200, 201], (\n                f\"Ошибка при создании сервиса ресурсов. \"\n                f\"Статус: {response.status_code}, Ответ: {response.text}\"\n            )\n    \n        with allure.step(\"Парсинг JSON-ответа\"):\n            try:\n                data = response.json()\n            except ValueError:\n                pytest.fail(\"Ответ не является валидным JSON\")\n    \n            allure.attach(str(data), name=\"Parsed Response Data\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Проверка структуры ответа\"):\n            required_fields = [\"id\", \"name\", \"system_name\"]\n            missing = [field for field in required_fields if field not in data]\n>           assert not missing, f\"В ответе отсутствуют обязательные поля: {', '.join(missing)}\"\nE           AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nE           assert not ['name', 'system_name']\n\ntests\\resource\\resource_service\\test_resource_service_create.py:122: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1755442568117,"stop":1755442568118,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"description":"\nТест создания нового сервиса ресурсов через POST /api/v1/resource_service\nПроверяет:\n1. Успешный статус-код (200 или 201)\n2. Валидность JSON-ответа\n3. Наличие ID и переданных данных в ответе\n4. Корректность типов полей\n","status":"failed","statusMessage":"AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nassert not ['name', 'system_name']","statusTrace":"@allure.story(\"Создание нового сервиса ресурсов (resource_service)\")\n    def test_create_resource_service():\n        \"\"\"\n        Тест создания нового сервиса ресурсов через POST /api/v1/resource_service\n        Проверяет:\n        1. Успешный статус-код (200 или 201)\n        2. Валидность JSON-ответа\n        3. Наличие ID и переданных данных в ответе\n        4. Корректность типов полей\n        \"\"\"\n        with allure.step(\"Загрузка переменных окружения\"):\n            load_dotenv(ENV_FILE)\n    \n        with allure.step(\"Чтение параметров из .env\"):\n            base_url = os.getenv(\"API_URL\")\n            login = os.getenv(\"API_LOGIN\")\n            password = os.getenv(\"API_PASSWORD\")\n            domain = os.getenv(\"API_DOMAIN\")\n    \n        with allure.step(\"Проверка обязательных переменных окружения\"):\n            assert base_url, \"API_URL не задан в .env\"\n            assert login, \"API_LOGIN не задан в .env\"\n            assert password, \"API_PASSWORD не задан в .env\"\n            assert domain, \"API_DOMAIN не задан в .env\"\n    \n        with allure.step(\"Получение токена аутентификации\"):\n            token = get_auth_token(login, password, 600, domain)\n            assert token, \"Не удалось получить токен аутентификации\"\n    \n        # Генерация уникальных данных\n        import time\n        unique_name = f\"Тестовый сервис {int(time.time())}\"\n        unique_system_name = f\"test_service_{int(time.time())}\"\n    \n        with allure.step(\"Формирование тела запроса\"):\n            request_body = {\n                \"name\": unique_name,\n                \"system_name\": unique_system_name\n            }\n            allure.attach(str(request_body), name=\"Request Body (JSON)\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Формирование URL и заголовков\"):\n            url = f\"{base_url}/api/v1/resource_service\"\n            headers = {\n                \"accept\": \"application/json\",\n                \"Content-Type\": \"application/json\",\n                \"tockenid\": token\n            }\n            allure.attach(url, name=\"Request URL\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(headers), name=\"Request Headers\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Отправка POST-запроса на создание сервиса ресурсов\"):\n            response = requests.post(url, json=request_body, headers=headers)\n            allure.attach(str(response.status_code), name=\"Response Status Code\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(response.text), name=\"Response Body\", attachment_type=AttachmentType.TEXT)\n            allure.attach(str(response.headers), name=\"Response Headers\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Проверка статуса ответа\"):\n            # Обычно 200 или 201 при успешном создании\n            assert response.status_code in [200, 201], (\n                f\"Ошибка при создании сервиса ресурсов. \"\n                f\"Статус: {response.status_code}, Ответ: {response.text}\"\n            )\n    \n        with allure.step(\"Парсинг JSON-ответа\"):\n            try:\n                data = response.json()\n            except ValueError:\n                pytest.fail(\"Ответ не является валидным JSON\")\n    \n            allure.attach(str(data), name=\"Parsed Response Data\", attachment_type=AttachmentType.JSON)\n    \n        with allure.step(\"Проверка структуры ответа\"):\n            required_fields = [\"id\", \"name\", \"system_name\"]\n            missing = [field for field in required_fields if field not in data]\n>           assert not missing, f\"В ответе отсутствуют обязательные поля: {', '.join(missing)}\"\nE           AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nE           assert not ['name', 'system_name']\n\ntests\\resource\\resource_service\\test_resource_service_create.py:122: AssertionError","steps":[{"name":"Загрузка переменных окружения","time":{"start":1755442610368,"stop":1755442610370,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Чтение параметров из .env","time":{"start":1755442610370,"stop":1755442610370,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Проверка обязательных переменных окружения","time":{"start":1755442610370,"stop":1755442610370,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Получение токена аутентификации","time":{"start":1755442610370,"stop":1755442610887,"duration":517},"status":"passed","steps":[{"name":"Отправка запроса для получения токена","time":{"start":1755442610370,"stop":1755442610887,"duration":517},"status":"passed","steps":[],"attachments":[{"uid":"53afd91be6129de8","name":"Request URL","source":"53afd91be6129de8.txt","type":"text/plain","size":48},{"uid":"6eb37a2c3c2e8ce3","name":"Request Headers","source":"6eb37a2c3c2e8ce3.txt","type":"text/plain","size":30},{"uid":"8a60cf07e59cc52","name":"Request Params","source":"8a60cf07e59cc52.txt","type":"text/plain","size":95},{"uid":"ad42e0f60f16dbef","name":"Response Status Code","source":"ad42e0f60f16dbef.txt","type":"text/plain","size":3},{"uid":"6d6429a07d494b79","name":"Response Headers","source":"6d6429a07d494b79.txt","type":"text/plain","size":377},{"uid":"52ea2742d8bbe85c","name":"Response Body","source":"52ea2742d8bbe85c.txt","type":"text/plain","size":462}],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":6}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":6},{"name":"Формирование тела запроса","time":{"start":1755442610887,"stop":1755442610888,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"70d5b149804e26ed","name":"Request Body (JSON)","source":"70d5b149804e26ed.json","type":"application/json","size":94}],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1},{"name":"Формирование URL и заголовков","time":{"start":1755442610888,"stop":1755442610890,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"dbe139016fd3dbff","name":"Request URL","source":"dbe139016fd3dbff.txt","type":"text/plain","size":53},{"uid":"d549c8bb40954044","name":"Request Headers","source":"d549c8bb40954044.json","type":"application/json","size":529}],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":2},{"name":"Отправка POST-запроса на создание сервиса ресурсов","time":{"start":1755442610890,"stop":1755442611489,"duration":599},"status":"passed","steps":[],"attachments":[{"uid":"abe0cddcba434371","name":"Response Status Code","source":"abe0cddcba434371.txt","type":"text/plain","size":3},{"uid":"9cf9035ed1d30a44","name":"Response Body","source":"9cf9035ed1d30a44.txt","type":"text/plain","size":10},{"uid":"1242e19e2af920e2","name":"Response Headers","source":"1242e19e2af920e2.json","type":"application/json","size":376}],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":3},{"name":"Проверка статуса ответа","time":{"start":1755442611489,"stop":1755442611489,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Парсинг JSON-ответа","time":{"start":1755442611489,"stop":1755442611490,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"94fe008e25e62d92","name":"Parsed Response Data","source":"94fe008e25e62d92.json","type":"application/json","size":11}],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1},{"name":"Проверка структуры ответа","time":{"start":1755442611490,"stop":1755442611490,"duration":0},"status":"failed","statusMessage":"AssertionError: В ответе отсутствуют обязательные поля: name, system_name\nassert not ['name', 'system_name']\n","statusTrace":"  File \"C:\\Users\\annal_e209e90\\OneDrive\\Рабочий стол\\test\\corpsoft\\tests\\resource\\resource_service\\test_resource_service_create.py\", line 122, in test_create_resource_service\n    assert not missing, f\"В ответе отсутствуют обязательные поля: {', '.join(missing)}\"\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":0}],"attachments":[],"parameters":[],"stepsCount":11,"attachmentStep":false,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":13},"afterStages":[],"labels":[{"name":"story","value":"Создание нового сервиса ресурсов (resource_service)"},{"name":"parentSuite","value":"tests.resource.resource_service"},{"name":"suite","value":"test_resource_service_create"},{"name":"host","value":"Lapochka"},{"name":"thread","value":"18760-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.resource.resource_service.test_resource_service_create"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"ce489642ca400dca.json","parameterValues":[]}