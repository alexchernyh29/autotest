{"uid":"9f0ad2329e4d1cb7","name":"test_get_user","fullName":"tests.user.test_user_crud#test_get_user","historyId":"49a287757140b80ae633eb76dafe678d","time":{"start":1752657693519,"stop":1752657693519,"duration":0},"description":"GET Получение данных пользователя /api/v1/user/(id)","descriptionHtml":"<p>GET Получение данных пользователя /api/v1/user/(id)</p>\n","status":"failed","statusMessage":"AssertionError: Ошибка создания пользователя: {\"code\":401,\"error\":\"not authorization\"}\nassert 401 == 200\n +  where 401 = <Response [401]>.status_code","statusTrace":"@pytest.fixture\n    def test_user():\n        \"\"\"Фикстура для создания тестового пользователя\"\"\"\n        # Загружаем переменные с явным указанием пути\n        load_dotenv(ENV_FILE)\n    \n        base_url = os.getenv(\"API_URL\")\n        token = os.getenv(\"TOKEN_ID\")\n    \n        # Проверяем, что переменные загрузились\n        assert base_url is not None, \"API_URL не найден в .env файле\"\n        assert token is not None, \"TOKEN_ID не найден в .env файле\"\n    \n        # Генерация случайных данных\n        rand_str = ''.join(random.choices(string.ascii_lowercase, k=5))\n        user_data = {\n            \"fio\": f\"Test User {rand_str}\",\n            \"login\": f\"test_{rand_str}\",\n            \"password\": \"TestPass123\",\n            \"mail\": f\"test.{rand_str}@example.com\",\n            \"phone\": f\"79{random.randint(1000000, 9999999)}\",\n            \"role_id\": 1,\n            \"tenant_id\": 123,\n            \"is_manager\": 1\n        }\n    \n        # Создание пользователя\n        response = requests.post(\n            f\"{base_url}/api/v1/user\",\n            headers={\n                \"accept\": \"application/json\",\n                \"content-type\": \"application/json\",\n                \"tockenid\": token  # Обратите внимание на опечатку в API (tockenid вместо tokenid)\n            },\n            json=user_data\n        )\n    \n>       assert response.status_code == 200, f\"Ошибка создания пользователя: {response.text}\"\nE       AssertionError: Ошибка создания пользователя: {\"code\":401,\"error\":\"not authorization\"}\nE       assert 401 == 200\nE        +  where 401 = <Response [401]>.status_code\n\ntests\\user\\test_user_crud.py:51: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_user","time":{"start":1752657693523,"stop":1752657693819,"duration":296},"status":"failed","statusMessage":"AssertionError: Ошибка создания пользователя: {\"code\":401,\"error\":\"not authorization\"}\nassert 401 == 200\n +  where 401 = <Response [401]>.status_code\n","statusTrace":"  File \"C:\\Users\\annal_e209e90\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pluggy\\_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"C:\\Users\\annal_e209e90\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pluggy\\_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\annal_e209e90\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\_pytest\\setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"C:\\Users\\annal_e209e90\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pluggy\\_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"C:\\Users\\annal_e209e90\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\_pytest\\fixtures.py\", line 1195, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"C:\\Users\\annal_e209e90\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\_pytest\\fixtures.py\", line 922, in call_fixture_func\n    fixture_result = next(generator)\n  File \"C:\\Users\\annal_e209e90\\OneDrive\\Рабочий стол\\test\\corpsoft\\tests\\user\\test_user_crud.py\", line 51, in test_user\n    assert response.status_code == 200, f\"Ошибка создания пользователя: {response.text}\"\n","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":true,"stepsCount":0,"attachmentStep":false,"hasContent":true}],"afterStages":[],"labels":[{"name":"parentSuite","value":"tests.user"},{"name":"suite","value":"test_user_crud"},{"name":"host","value":"Lapochka"},{"name":"thread","value":"8612-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.user.test_user_crud"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"9f0ad2329e4d1cb7.json","parameterValues":[]}